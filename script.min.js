let div=document.getElementById("cont"),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e4),renderer=new THREE.WebGLRenderer;renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(0),document.body.appendChild(renderer.domElement);let leftArrow=!1,rightArrow=!1,upArrow=!1,downArrow=!1;window.addEventListener("keydown",function(e){"ArrowLeft"===e.code?leftArrow=!0:"ArrowRight"===e.code?rightArrow=!0:"ArrowUp"===e.code?upArrow=!0:"ArrowDown"===e.code&&(downArrow=!0)}),window.addEventListener("keyup",function(e){"ArrowLeft"===e.code?leftArrow=!1:"ArrowRight"===e.code?rightArrow=!1:"ArrowUp"===e.code?upArrow=!1:"ArrowDown"===e.code&&(downArrow=!1)});let myObj,loader=new THREE.ObjectLoader;loader.load("ferrari1.json",function(e){console.log(e.rotation.x),(myObj=e).rotation.y=1.57,myObj.position.x=0,myObj.scale.set(1.15,1.15,1.15),scene.add(myObj)});let point=new THREE.PointLight(0,.7);scene.add(point);let ambient=new THREE.AmbientLight(16773120);scene.add(ambient);let directionalLight=new THREE.DirectionalLight(16753920,.8);scene.add(directionalLight),window.addEventListener("resize",function(){let e=window.innerWidth,r=window.innerHeight;renderer.setSize(e,r),camera.aspect=e/r,camera.updateProjectionMatrix()});let skyboxGeometry=new THREE.CubeGeometry(3e3,2500,1e4),cubeMaterials=[new THREE.MeshBasicMaterial({map:new THREE.TextureLoader().load("texture/front.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:new THREE.TextureLoader().load("texture/back.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:new THREE.TextureLoader().load("texture/up.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:new THREE.TextureLoader().load("texture/down.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:new THREE.TextureLoader().load("texture/right.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:new THREE.TextureLoader().load("texture/left.png"),side:THREE.DoubleSide})],cubeMaterial=new THREE.MeshFaceMaterial(cubeMaterials),cube=new THREE.Mesh(skyboxGeometry,cubeMaterial);scene.add(cube);let grid=new THREE.GridHelper(1e5,2e4,8388736,8388736);grid.position.y=-3,scene.add(grid);let composer=new THREE.EffectComposer(renderer),renderPass=new THREE.RenderPass(scene,camera);composer.addPass(renderPass);let pass1=new THREE.GlitchPass(0);composer.addPass(pass1);let effect=new THREE.ShaderPass(THREE.FilmShader);function update(){leftArrow&&myObj.position.x>-20?(myObj.position.x-=.1,console.log(myObj.position.x)):rightArrow&&myObj.position.x<20&&(myObj.position.x+=.1,console.log(myObj.position.x)),upArrow?myObj.position.z&&(myObj.position.z-=.1):downArrow&&(myObj.position.z+=.1),camera.position.z-=.7,cube.position.z-=.4,camera.position.y>2&&(myObj.position.z-=.719,camera.position.y-=.1,camera.rotation.x+=.0025),camera.position.y>2||(div.style.display="block",myObj.position.z-=.7)}function render(){renderer.render(scene,camera),composer.render()}function GameLoop(){requestAnimationFrame(GameLoop),update(),render()}effect.uniforms.nIntensity.value=.2,effect.uniforms.sIntensity.value=.3,effect.uniforms.sCount.value=1800,effect.uniforms.grayscale.value=0,composer.addPass(effect),effect.renderToScreen=!0,cube.position.z=-4e3,camera.rotation.x=300,camera.position.y=60,GameLoop();
